{"ast":null,"code":"var _jsxFileName = \"/home/workspace/reactjs/coding-practices/moviesApp/src/components/Login/index.js\";\nimport { Component } from 'react';\nimport Cookies from 'js-cookie'; // import {Redirect} from 'react-router-dom'\n\nimport './index.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: '',\n      password: '',\n      errorMessage: '',\n      showError: false\n    };\n\n    this.changeInput = event => {\n      this.setState({\n        username: event.target.value\n      });\n    };\n\n    this.changePassword = event => {\n      this.setState({\n        password: event.target.value\n      });\n    };\n\n    this.onSuccessLogin = () => {\n      const apiKey = '970d698cc21f18d0759bec348ed6e217';\n      Cookies.set('request_token', apiKey, {\n        expires: 30\n      });\n    };\n\n    this.onFailureLogin = errorMessage => {\n      this.setState({\n        errorMessage,\n        showError: true\n      });\n    };\n\n    this.submitForm = async event => {\n      event.preventDefault();\n      const {\n        username,\n        password\n      } = this.state;\n      const apiKey = '970d698cc21f18d0759bec348ed6e217';\n      const requestTokenResponse = await fetch(`https://api.themoviedb.org/3/authentication/token/new?api_key=${apiKey}`);\n      const token = await requestTokenResponse.json();\n      const userDetails = {\n        username,\n        password,\n        request_token: token.request_token\n      };\n      const url = `https://api.themoviedb.org/3/authentication/token/validate_with_login?api_key=${apiKey}`;\n      const options = {\n        method: 'POST',\n        body: JSON.stringify(userDetails),\n        headers: {\n          'Content-type': 'application/json'\n        }\n      };\n      const response = await fetch(url, options);\n      const data = await response.json();\n\n      if (response.ok) {\n        this.onSuccessLogin();\n        console.log(data);\n      } else {\n        this.onFailureLogin(data.status_message);\n        console.log(data);\n      } // console.log(response)\n      // console.log(body)\n\n    };\n  }\n\n  render() {\n    const {\n      errorMessage,\n      showError\n    } = this.state;\n    console.log(errorMessage, showError);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"movies-app-main-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"logo-container\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"movies-logo\",\n          src: \"https://res.cloudinary.com/dtxgq5uxo/image/upload/v1630941228/Group_7399_gvhjyc.png\",\n          alt: \"logo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        type: \"submit\",\n        className: \"form-container\",\n        onSubmit: this.submitForm,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"login-heading\",\n          children: \"Sign In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"label\",\n            htmlFor: \"uname\",\n            children: \"USERNAME\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input-field\",\n            id: \"uname\",\n            type: \"text\",\n            onChange: this.changeInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"label\",\n            htmlFor: \"password\",\n            children: \"PASSWORD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input-field\",\n            id: \"password\",\n            type: \"password\",\n            onChange: this.changePassword\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), showError ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: errorMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 24\n        }, this) : 'null', /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"sign-btn\",\n          type: \"submit\",\n          children: \"Sign In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/home/workspace/reactjs/coding-practices/moviesApp/src/components/Login/index.js"],"names":["Component","Cookies","Login","state","username","password","errorMessage","showError","changeInput","event","setState","target","value","changePassword","onSuccessLogin","apiKey","set","expires","onFailureLogin","submitForm","preventDefault","requestTokenResponse","fetch","token","json","userDetails","request_token","url","options","method","body","JSON","stringify","headers","response","data","ok","console","log","status_message","render"],"mappings":"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","sourcesContent":["import {Component} from 'react'\n\nimport Cookies from 'js-cookie'\n// import {Redirect} from 'react-router-dom'\n\nimport './index.css'\n\nclass Login extends Component {\n  state = {\n    username: '',\n    password: '',\n    errorMessage: '',\n    showError: false,\n  }\n\n  changeInput = event => {\n    this.setState({username: event.target.value})\n  }\n\n  changePassword = event => {\n    this.setState({password: event.target.value})\n  }\n\n  onSuccessLogin = () => {\n    const apiKey = '970d698cc21f18d0759bec348ed6e217'\n\n    Cookies.set('request_token', apiKey, {expires: 30})\n  }\n\n  onFailureLogin = errorMessage => {\n    this.setState({errorMessage, showError: true})\n  }\n\n  submitForm = async event => {\n    event.preventDefault()\n\n    const {username, password} = this.state\n\n    const apiKey = '970d698cc21f18d0759bec348ed6e217'\n\n    const requestTokenResponse = await fetch(\n      `https://api.themoviedb.org/3/authentication/token/new?api_key=${apiKey}`,\n    )\n\n    const token = await requestTokenResponse.json()\n\n    const userDetails = {username, password, request_token: token.request_token}\n\n    const url = `https://api.themoviedb.org/3/authentication/token/validate_with_login?api_key=${apiKey}`\n\n    const options = {\n      method: 'POST',\n      body: JSON.stringify(userDetails),\n      headers: {\n        'Content-type': 'application/json',\n      },\n    }\n\n    const response = await fetch(url, options)\n    const data = await response.json()\n    if (response.ok) {\n      this.onSuccessLogin()\n      console.log(data)\n    } else {\n      this.onFailureLogin(data.status_message)\n      console.log(data)\n    }\n\n    // console.log(response)\n\n    // console.log(body)\n  }\n\n  render() {\n    const {errorMessage, showError} = this.state\n\n    console.log(errorMessage, showError)\n\n    return (\n      <div className=\"movies-app-main-container\">\n        <div className=\"logo-container\">\n          <img\n            className=\"movies-logo\"\n            src=\"https://res.cloudinary.com/dtxgq5uxo/image/upload/v1630941228/Group_7399_gvhjyc.png\"\n            alt=\"logo\"\n          />\n        </div>\n\n        <form\n          type=\"submit\"\n          className=\"form-container\"\n          onSubmit={this.submitForm}\n        >\n          <h1 className=\"login-heading\">Sign In</h1>\n          <div className=\"input-container\">\n            <label className=\"label\" htmlFor=\"uname\">\n              USERNAME\n            </label>\n            <input\n              className=\"input-field\"\n              id=\"uname\"\n              type=\"text\"\n              onChange={this.changeInput}\n            />\n          </div>\n          <div className=\"input-container\">\n            <label className=\"label\" htmlFor=\"password\">\n              PASSWORD\n            </label>\n            <input\n              className=\"input-field\"\n              id=\"password\"\n              type=\"password\"\n              onChange={this.changePassword}\n            />\n          </div>\n          {showError ? <p>{errorMessage}</p> : 'null'}\n          <button className=\"sign-btn\" type=\"submit\">\n            Sign In\n          </button>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}