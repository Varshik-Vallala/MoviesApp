{"ast":null,"code":"var _jsxFileName = \"/home/workspace/reactjs/coding-practices/moviesApp/src/components/Login/index.js\";\nimport { Component } from 'react';\nimport Cookies from 'js-cookie'; // import {Redirect} from 'react-router-dom'\n\nimport './index.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: '',\n      password: ''\n    };\n\n    this.changeInput = event => {\n      this.setState({\n        username: event.target.value\n      });\n    };\n\n    this.changePassword = event => {\n      this.setState({\n        password: event.target.value\n      });\n    };\n\n    this.onSuccessLogin = token => {\n      Cookies.set('request_token', token, {\n        expires: 30\n      });\n    };\n\n    this.submitForm = async event => {\n      event.preventDefault();\n      const {\n        username,\n        password\n      } = this.state;\n      const apiKey = '970d698cc21f18d0759bec348ed6e217';\n      const requestTokenResponse = await fetch(`https://api.themoviedb.org/3/authentication/token/new?api_key=${apiKey}`);\n      const token = await requestTokenResponse.json();\n      const userDetails = {\n        username,\n        password,\n        request_token: token.request_token\n      };\n      const url = `https://api.themoviedb.org/3/authentication/token/validate_with_login?api_key=${apiKey}`;\n      const options = {\n        method: 'POST',\n        body: JSON.stringify(userDetails),\n        headers: {\n          'Content-type': 'application/json'\n        }\n      };\n      const response = await fetch(url, options);\n      const data = await response.json();\n\n      if (response.ok) {\n        this.onSuccessLogin(data.request_token);\n        console.log(data);\n      } else {\n        this.onFailureLogin(data.status_message);\n        console.log(data);\n      } // console.log(response)\n      // console.log(body)\n\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"movies-app-main-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"logo-container\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"movies-logo\",\n          src: \"https://res.cloudinary.com/dtxgq5uxo/image/upload/v1630941228/Group_7399_gvhjyc.png\",\n          alt: \"logo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        type: \"submit\",\n        className: \"form-container\",\n        onSubmit: this.submitForm,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"login-heading\",\n          children: \"Sign In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"label\",\n            htmlFor: \"uname\",\n            children: \"USERNAME\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input-field\",\n            id: \"uname\",\n            type: \"text\",\n            onChange: this.changeInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"label\",\n            htmlFor: \"password\",\n            children: \"PASSWORD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input-field\",\n            id: \"password\",\n            type: \"password\",\n            onChange: this.changePassword\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"sign-btn\",\n          type: \"submit\",\n          children: \"Sign In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/home/workspace/reactjs/coding-practices/moviesApp/src/components/Login/index.js"],"names":["Component","Cookies","Login","state","username","password","changeInput","event","setState","target","value","changePassword","onSuccessLogin","token","set","expires","submitForm","preventDefault","apiKey","requestTokenResponse","fetch","json","userDetails","request_token","url","options","method","body","JSON","stringify","headers","response","data","ok","console","log","onFailureLogin","status_message","render"],"mappings":"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","sourcesContent":["import {Component} from 'react'\n\nimport Cookies from 'js-cookie'\n// import {Redirect} from 'react-router-dom'\n\nimport './index.css'\n\nclass Login extends Component {\n  state = {\n    username: '',\n    password: '',\n  }\n\n  changeInput = event => {\n    this.setState({username: event.target.value})\n  }\n\n  changePassword = event => {\n    this.setState({password: event.target.value})\n  }\n\n  onSuccessLogin = token => {\n    Cookies.set('request_token', token, {expires: 30})\n  }\n\n  submitForm = async event => {\n    event.preventDefault()\n\n    const {username, password} = this.state\n\n    const apiKey = '970d698cc21f18d0759bec348ed6e217'\n\n    const requestTokenResponse = await fetch(\n      `https://api.themoviedb.org/3/authentication/token/new?api_key=${apiKey}`,\n    )\n\n    const token = await requestTokenResponse.json()\n\n    const userDetails = {username, password, request_token: token.request_token}\n\n    const url = `https://api.themoviedb.org/3/authentication/token/validate_with_login?api_key=${apiKey}`\n\n    const options = {\n      method: 'POST',\n      body: JSON.stringify(userDetails),\n      headers: {\n        'Content-type': 'application/json',\n      },\n    }\n\n    const response = await fetch(url, options)\n    const data = await response.json()\n    if (response.ok) {\n      this.onSuccessLogin(data.request_token)\n      console.log(data)\n    } else {\n      this.onFailureLogin(data.status_message)\n      console.log(data)\n    }\n\n    // console.log(response)\n\n    // console.log(body)\n  }\n\n  render() {\n    return (\n      <div className=\"movies-app-main-container\">\n        <div className=\"logo-container\">\n          <img\n            className=\"movies-logo\"\n            src=\"https://res.cloudinary.com/dtxgq5uxo/image/upload/v1630941228/Group_7399_gvhjyc.png\"\n            alt=\"logo\"\n          />\n        </div>\n\n        <form\n          type=\"submit\"\n          className=\"form-container\"\n          onSubmit={this.submitForm}\n        >\n          <h1 className=\"login-heading\">Sign In</h1>\n          <div className=\"input-container\">\n            <label className=\"label\" htmlFor=\"uname\">\n              USERNAME\n            </label>\n            <input\n              className=\"input-field\"\n              id=\"uname\"\n              type=\"text\"\n              onChange={this.changeInput}\n            />\n          </div>\n          <div className=\"input-container\">\n            <label className=\"label\" htmlFor=\"password\">\n              PASSWORD\n            </label>\n            <input\n              className=\"input-field\"\n              id=\"password\"\n              type=\"password\"\n              onChange={this.changePassword}\n            />\n          </div>\n          <button className=\"sign-btn\" type=\"submit\">\n            Sign In\n          </button>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}